<!DOCTYPE html>
<html>
  <head>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.0.4/socket.io.js"></script>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" type="text/css" href="styles.css" />
  </head>
  <body style="background-image: url('wall2.jpg'); background-position: center; background-size: contain;">
    <div>
      <div className="relative">
        <h1 className="text-2xl md:text-3xl text-slate-800 font-bold mb-1">
          Good afternoon, John. ðŸ‘‹
        </h1>
        <p>Here is whatâ€™s happening with your projects today:</p>
      </div>
    </div>
    <div
      className="relative bg-indigo-200 p-4 sm:p-6 rounded-lg overflow-hidden mb-8 w-[90vw] h-[120px]"
    >
      {/* Background illustration */}
      <div
        className="absolute  right-0 top-0 -mt-4 mr-16 pointer-events-none hidden xl:block"
        aria-hidden="true"
      >
        <svg width="319" height="198" xmlnsXlink="http://www.w3.org/1999/xlink">
          <defs>
            <path id="welcome-a" d="M64 0l64 128-64-20-64 20z" />
            <path id="welcome-e" d="M40 0l40 80-40-12.5L0 80z" />
            <path id="welcome-g" d="M40 0l40 80-40-12.5L0 80z" />
            <linearGradient x1="50%" y1="0%" x2="50%" y2="100%" id="welcome-b">
              <stop stopColor="#A5B4FC" offset="0%" />
              <stop stopColor="#818CF8" offset="100%" />
            </linearGradient>
            <linearGradient
              x1="50%"
              y1="24.537%"
              x2="50%"
              y2="100%"
              id="welcome-c"
            >
              <stop stopColor="#4338CA" offset="0%" />
              <stop stopColor="#6366F1" stopOpacity="0" offset="100%" />
            </linearGradient>
          </defs>
          <g fill="none" fillRule="evenodd">
            <g transform="rotate(64 36.592 105.604)">
              <mask id="welcome-d" fill="#fff">
                <use xlinkHref="#welcome-a" />
              </mask>
              <use fill="url(#welcome-b)" xlinkHref="#welcome-a" />
              <path
                fill="url(#welcome-c)"
                mask="url(#welcome-d)"
                d="M64-24h80v152H64z"
              />
            </g>
            <g transform="rotate(-51 91.324 -105.372)">
              <mask id="welcome-f" fill="#fff">
                <use xlinkHref="#welcome-e" />
              </mask>
              <use fill="url(#welcome-b)" xlinkHref="#welcome-e" />
              <path
                fill="url(#welcome-c)"
                mask="url(#welcome-f)"
                d="M40.333-15.147h50v95h-50z"
              />
            </g>
            <g transform="rotate(44 61.546 392.623)">
              <mask id="welcome-h" fill="#fff">
                <use xlinkHref="#welcome-g" />
              </mask>
              <use fill="url(#welcome-b)" xlinkHref="#welcome-g" />
              <path
                fill="url(#welcome-c)"
                mask="url(#welcome-h)"
                d="M40.333-15.147h50v95h-50z"
              />
            </g>
          </g>
        </svg>
      </div>

      {/* Content */}
      <div className="relative">
        <h1 className="text-2xl md:text-3xl text-slate-800 font-bold mb-1">
          Good afternoon, John. ðŸ‘‹
        </h1>
        <p>Here is whatâ€™s happening with your projects today:</p>
      </div>
    </div>
    <h1>Communicating from an Arduino to Node.js</h1>
    <div className="grid grid-cols-2 sm:grid-cols-4 gap-2 sm:gap-6 mb-10">
      <div
        className="flex flex-col bg-purple-600 text-white gap-2 rounded-xl shadow-lg hover:shadow-xl py-5 px-5"
      >
        <h4 className="text-gray-100 font-medium">Methane</h4>
        <h2 id="Methane" className="text-5xl font-bold"></h2>
      </div>
      <div
        className="flex flex-col bg-red-500 text-white gap-2 rounded-xl shadow-lg hover:shadow-xl py-5 px-5"
      >
        <h4 className="text-gray-100 font-medium">Ammonia</h4>
        <h2 id="Ammonia" className="text-5xl font-bold"></h2>
      </div>
      <div
        className="flex flex-col bg-yellow-500 text-white gap-2 rounded-xl shadow-lg hover:shadow-xl py-5 px-5"
      >
        <h4 className="text-gray-100 font-medium">CO2</h4>
        <h2 id="carbon" className="text-5xl font-bold"></h2>
      </div>
    </div>
    <ul id="sample"></ul>

    <script>
      var i;
      var socket = io();
      const myList = document.querySelector("#sample");

      socket.on("data", function (data) {
        console.log(typeof data);
        const floatRegex = /[-+]?[0-9]*\.?[0-9]+/;
        const floatPart = parseFloat(data.match(floatRegex)[0]);
        console.log(floatPart);
        console.log(data.startsWith("Methane"));

        const li = document.createElement("li");
        li.textContent = data;
        // Append the list item to the list
        myList.appendChild(li);

        if (data.startsWith("Methane")) {
          const floatRegex = /[-+]?[0-9]*\.?[0-9]+/;
          const floatPart = parseFloat(data.match(floatRegex)[0]);
          console.log(floatPart);
          document.getElementById("Methane").innerHTML = floatPart;
        } else if (data.startsWith("CO2")) {
          const floatRegex = /[-+]?[0-9]*\.?[0-9]+/;
          const floatPart = parseFloat(data.match(floatRegex)[0]);
          console.log(floatPart);
          document.getElementById("carbon").innerHTML = floatPart;
        } else if (data.startsWith("Ammonia")) {
          const floatRegex = /[-+]?[0-9]*\.?[0-9]+/;
          const floatPart = parseFloat(data.match(floatRegex)[0]);
          console.log(floatPart);
          document.getElementById("Ammonia").innerHTML = floatPart;
        }

        // Create a new table row element

        // Add the row to the table body
      });
    </script>
  </body>
</html>
